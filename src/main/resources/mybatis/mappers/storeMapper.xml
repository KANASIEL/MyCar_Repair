<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.boot.dao.StoreDAO">

    <!-- 업체 회원가입 -->
    <insert id="registerStore" parameterType="com.boot.dto.StoreDTO">
        INSERT INTO tbl_store (
            store_id,
            password,
            store_name,
            email,
            phone_number,
            address,
            description,
            opening_hours,
            reg_date
        ) VALUES (
            #{storeId},
            #{password},
            #{storeName},
            #{email},
            #{phoneNumber},
            #{address},
            #{description},
            #{openingHours},
            SYSDATE
        )
    </insert>
	
	<select id="findAllStores" resultType="com.boot.dto.StoreDTO">
    SELECT 
        STORE_ID AS storeId, 
        STORE_NAME AS storeName, 
        ADDRESS AS address,
        REG_DATE AS regDate,
        LATITUDE AS latitude,
        LONGITUDE AS longitude,
        STORE_STATUS AS storeStatus,
        DESCRIPTION AS description,
        OPENING_HOURS AS openingHours
        
        FROM 
        TBL_STORE
    WHERE 
        STORE_STATUS = 'APPROVED' 
</select>

    <!-- 아이디 중복 체크 (필요시) -->
    <select id="checkId" parameterType="String" resultType="int">
        SELECT COUNT(*) FROM tbl_store WHERE store_id = #{storeId}
    </select>

</mapper>